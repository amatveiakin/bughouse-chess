<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="description" content="Online bughouse chess server">
  <meta name="keywords" content="bughouse, bughouse chess, Siamese chess, tandem chess, transfer chess, swap chess">
  <meta name="author" content="Andrei Matveiakin">
  <title>Bughouse chess</title>
  <link rel="icon" href="favicon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wdth@75;87.5;100&display=swap" rel="stylesheet">
</head>

<body>
  <noscript>This page contains webassembly and javascript content, please enable javascript in your browser.</noscript>

  <!-- Google tag (gtag.js) -->
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { window.dataLayer.push(arguments); }
    gtag('consent', 'default', {
      'ad_storage': 'denied',
      'analytics_storage': 'denied',
    });
  </script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-26BX8YNNLS"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { window.dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-26BX8YNNLS');
  </script>

  <script src="./bootstrap.js" type="module"></script>

  <!-- Note. Cannot use "display: none" because of a Firefox bug:
        https://bugzilla.mozilla.org/show_bug.cgi?id=376027 -->
  <svg width="0" height="0" style="position: absolute">
    <defs id="svg-defs">
      <symbol id="registered-user">
        <path id="path" d="m4.047 2.5141a0.66 0.66 0 1 0-0.3186 0.0388l-0.2943 2.381-1.4189-1.2323a0.6575 0.6575 0 1 0-0.2643 0.15l0.7392 2.5343 0.7644 1.2508-0.7644 0.1352v0.99h5.0262v-0.99l-0.7742-0.1358 0.764-1.25 0.7392-2.5342a0.66 0.66 0 1 0-0.2643-0.15l-1.4189 1.232-0.294-2.381a0.66 0.66 0 1 0-0.3186-0.0388l-0.9514 2.1558z" stroke-width=".1"/>
      </symbol>

      <symbol id="leave">
        <path d="m80.2 88.8q3.56 0 6.1-2.54 2.54-2.54 2.54-6.1v-60.4q0-3.56-2.54-6.1-2.54-2.54-6.1-2.54h-30.2v8.63h30.2v60.4h-30.2v8.63zm-47.5-17.3 5.93-6.26-11-11h35.3v-8.63h-35.3l11-11-5.93-6.26-21.6 21.6z"/>
      </symbol>

      <radialGradient id="faction-red-gradient" cx="3.9267" cy="3.3585" r="3.4093" gradientTransform="matrix(-.1146 .84997 -1.0222 -.13782 7.776 .43219)" gradientUnits="userSpaceOnUse">
        <stop stop-color="#ffafaf" offset="0"/>
        <stop stop-color="#cb0000" offset="1"/>
      </radialGradient>
      <symbol id="faction-red">
        <circle cx="5" cy="5" r="3.5164" fill="url(#faction-red-gradient)"/>
      </symbol>
      <radialGradient id="faction-blue-gradient" cx="3.3836" cy=".70436" r="3.0134" gradientTransform="matrix(-.2759 3.7305 -1.4061 -.10399 5.8869 -15.657)" gradientUnits="userSpaceOnUse">
        <stop stop-color="#8080ff" offset="0"/>
        <stop stop-color="#0000e8" offset="1"/>
      </radialGradient>
      <symbol id="faction-blue">
        <rect transform="rotate(45)" x="3.963" y="-3.1081" width="6.2162" height="6.2162" fill="url(#faction-blue-gradient)"/>
      </symbol>
      <symbol id="faction-random">
        <rect transform="matrix(.7061 .70811 -.25745 .96629 0 0)" x="2.7099" y="-.011564" width="4.3367" height="4.3367" fill="#dbdbdb" stroke="#000" stroke-linejoin="bevel" stroke-width=".237"/>
        <rect transform="matrix(-.96629 .25745 -.70811 -.7061 0 0)" x="-4.3252" y="-7.0467" width="4.3367" height="4.3367" fill="#f4f4f4" stroke="#000" stroke-linejoin="bevel" stroke-width=".237"/>
        <rect transform="matrix(-.26019 .96556 -.96556 .26019 0 0)" x="7.0582" y="-11.395" width="4.3367" height="4.3367" fill="#c3c3c3" stroke="#000" stroke-linejoin="bevel" stroke-width=".237"/>
        <circle transform="matrix(.7061 .70811 -.25745 .96629 0 0)" cx="4.8783" cy="2.1568" r=".39052"/>
        <circle transform="matrix(-.96629 .25745 -.70811 -.7061 0 0)" cx="-3.2416" cy="-5.9631" r=".39052"/>
        <circle transform="matrix(-.96629 .25745 -.70811 -.7061 0 0)" cx="-2.1568" cy="-4.8783" r=".39052"/>
        <circle transform="matrix(-.96629 .25745 -.70811 -.7061 0 0)" cx="-1.072" cy="-3.7935" r=".39052"/>
        <circle transform="matrix(-.26019 .96556 -.96556 .26019 0 0)" cx="8.1418" cy="-10.311" r=".39052"/>
        <circle transform="matrix(-.26019 .96556 -.96556 .26019 0 0)" cx="10.311" cy="-10.311" r=".39052"/>
        <circle transform="matrix(-.26019 .96556 -.96556 .26019 0 0)" cx="9.2266" cy="-9.2266" r=".39052"/>
        <circle transform="matrix(-.26019 .96556 -.96556 .26019 0 0)" cx="8.1418" cy="-8.1418" r=".39052"/>
        <circle transform="matrix(-.26019 .96556 -.96556 .26019 0 0)" cx="10.311" cy="-8.1418" r=".39052"/>
      </symbol>
      <symbol id="faction-observer">
        <ellipse cx="3.2668" cy="5" rx="1.9963" ry="3.2489" fill="#fff" stroke="#000" stroke-linejoin="bevel" stroke-width=".3"/>
        <circle cx="2.573" cy="4.948" r=".83036"/>
        <circle cx="2.7855" cy="4.5745" r=".32224" fill="#fff"/>
        <ellipse cx="6.7332" cy="5" rx="1.9963" ry="3.2489" fill="#fff" stroke="#000" stroke-linejoin="bevel" stroke-width=".3"/>
        <circle cx="6.0395" cy="4.948" r=".83036"/>
        <circle cx="6.252" cy="4.5745" r=".32224" fill="#fff"/>
      </symbol>

      <symbol id="readiness-checkbox">
        <rect
          style="fill:none;stroke-width:0.4"
          width="6.8" height="6.8" x="1.6" y="1.6" ry="0.8" />
      </symbol>
      <symbol id="readiness-checkmark">
        <path
          style="fill:none;stroke-width:0.6;stroke-linejoin:miter;stroke-miterlimit:4"
          d="m 2.709561,4.5122919 c 0.4485028,0.8339431 0.7905735,1.8026437 1.1275222,2.6521436 0,0 0.1038835,0.1746166 0.192985,0.193073 0.093101,0.019291 0.270922,0.015018 0.3584346,-0.086292 C 5.7977495,5.26227 6.790862,2.777499 7.8933261,0.79319363 L 7.7826679,0.84283693 C 6.7062234,2.849886 5.6932692,5.0471417 4.5856085,6.8504341 4.2080204,7.4898828 4.3659627,6.9230289 4.1212491,7.0039093 3.6603713,6.1540468 3.3781129,5.1395962 3.1187998,4.2792776 Z"
          sodipodi:nodetypes="cccccccccc" />
      </symbol>

      <symbol id="stealing-hand">
        <g stroke="#000" stroke-linejoin="round" stroke-width="1.5">
          <path d="m94.2 36.3s5.2 12.8 4.38 13.9c-0.673 0.945-1.97 1.48-3.14 1.52-1.64 0.0541-3.16-0.708-4.23-1.95-0.989-1.14-2.51-4.3-2.51-4.3l-6.48-4.95" fill="#999000"/>
          <path d="m112 38.1s7.27 16.2 6.71 17.7c-0.474 1.37-1.46 2.16-2.87 2.45-1.56 0.329-3.9-0.361-5.24-1.23-2.72-1.76-5.7-7.4-5.7-7.4l-16-9.49" fill="#ada300"/>
          <path d="m120 36.7s10.1 10.2 11.2 12.2c0.455 0.776 0.989 1.64 0.929 2.54-0.0874 1.33-0.797 2.73-1.86 3.56-1.35 1.03-3.31 1.33-4.99 1.1-2.31-0.317-4.36-1.82-6.18-3.29-1.78-1.46-4.4-5.32-4.4-5.32l-13.6-7.69" fill="#c2b600"/>
          <path d="m20.9 17.8s26-0.409 39 0.0845c6.1 0.231 12.3 0.179 18.3 1.35 4.04 0.792 7.8 2.64 11.7 3.81 9.79 2.91 20.1 4.36 29.6 7.94 3.23 1.21 7.02 1.97 9.29 4.57 0.82 0.939 1.27 2.31 1.18 3.56-0.103 1.53-0.83 3.17-2.03 4.15-1.31 1.05-3.21 1.21-4.9 1.18-2.52-0.0444-7.27-2.03-7.27-2.03s-4.44 0.218-6.6-0.174c-2.45-0.446-7-2.45-7-2.45s-7.54 0.778-11.3 0.761c-1.84-9e-3 -3.65-0.551-5.49-0.423-3.54 0.247-10.7 2.37-10.7 2.37s0.0765 1.07 0.254 1.61c1.55 4.67 6.5 7.42 9.39 11.4 1.35 1.87 3.04 3.65 3.69 5.87 0.415 1.42 0.566 3.04 0.0409 4.44-0.446 1.17-1.41 2.2-2.52 2.77-1.39 0.727-3.1 0.759-4.65 0.616-1.82-0.168-3.65-0.744-5.2-1.7-1.86-1.14-3.19-2.98-4.63-4.63-2.45-2.81-4.02-6.37-6.77-8.87-1.6-1.46-3.5-2.6-5.49-3.46-2.35-1.02-4.95-1.32-7.44-1.95-1.97-0.495-4.04-0.685-5.91-1.44-2.05-0.819-4.05-1.89-5.76-3.29-1-0.828-2.54-2.96-2.54-2.96l-15.9 2.45s-2.05-5.41-1.95-14.3c0.0778-6.66 1.69-11.2 1.69-11.2z" fill="#d6ca00"/>
          <path d="m37 40.7-1.78-3.54" fill="none"/>
          <path d="m74.7 42.5-0.256-3.81" fill="none"/>
        </g>
      </symbol>

      <filter id="google-logo-background">
        <feGaussianBlur result="blur" stdDeviation="0.2 0.2"/>
      </filter>
      <filter id="lichess-logo-background">
        <feGaussianBlur result="blur" stdDeviation="2 2"/>
      </filter>
      <filter id="icon-shadow">
        <feDropShadow dx=0 dy=0 stdDeviation=0.5 flood-color="#c4dc5c" flood-opacity=1 />
      </filter>
      <filter id="board-shadow">
        <feDropShadow dx=0.04 dy=0.04 stdDeviation=0.06 flood-color="#000000" flood-opacity=0.7 />
      </filter>
      <filter id="board-shadow-slim">
        <feDropShadow dx=0.03 dy=0.03 stdDeviation=0.04 flood-color="#000000" flood-opacity=0.5 />
      </filter>
      <filter id="reserve-shadow">
        <feDropShadow dx=0 dy=0 stdDeviation=0.1 flood-color="#8eab6d" flood-opacity=1 />
      </filter>
      <filter id="reserve-shadow-gray">
        <feDropShadow dx=0 dy=0 stdDeviation=0.1 flood-color="#a2a2a2" flood-opacity=1 />
      </filter>
      <filter id="reserve-highlight-shadow">
        <feDropShadow dx=+0.03 dy=+0.03 stdDeviation=0.03 flood-color="#aafff9" flood-opacity=0.6 />
        <feDropShadow dx=+0.03 dy=-0.03 stdDeviation=0.03 flood-color="#aafff9" flood-opacity=0.6 />
        <feDropShadow dx=-0.03 dy=+0.03 stdDeviation=0.03 flood-color="#aafff9" flood-opacity=0.6 />
        <feDropShadow dx=-0.03 dy=-0.03 stdDeviation=0.03 flood-color="#aafff9" flood-opacity=0.6 />
      </filter>
      <filter id="glowing-steal">
        <!-- TODO: Consider using this quadruple-shadow style in other filters -->
        <feDropShadow dx=+0.03 dy=+0.03 stdDeviation=0.03 flood-color="#8cccc8" flood-opacity=0.7 />
        <feDropShadow dx=+0.03 dy=-0.03 stdDeviation=0.03 flood-color="#8cccc8" flood-opacity=0.7 />
        <feDropShadow dx=-0.03 dy=+0.03 stdDeviation=0.03 flood-color="#8cccc8" flood-opacity=0.7 />
        <feDropShadow dx=-0.03 dy=-0.03 stdDeviation=0.03 flood-color="#8cccc8" flood-opacity=0.7 />
      </filter>
      <radialGradient id="drag-start-gradient-onwhite">
        <stop offset="5%" stop-color="#eefffe" stop-opacity=1 />
        <stop offset="35%" stop-color="#eefffe" stop-opacity=0 />
      </radialGradient>
      <radialGradient id="drag-start-gradient-onblack">
        <stop offset="5%" stop-color="#eefffe" stop-opacity=0.8 />
        <stop offset="35%" stop-color="#eefffe" stop-opacity=0 />
      </radialGradient>
      <radialGradient id="drag-over-gradient-onwhite" r="75%">
        <stop offset="70%" stop-color="#eefffe" stop-opacity=0 />
        <stop offset="85%" stop-color="#eefffe" stop-opacity=1 />
      </radialGradient>
      <radialGradient id="drag-over-gradient-onblack" r="75%">
        <stop offset="70%" stop-color="#eefffe" stop-opacity=0 />
        <stop offset="85%" stop-color="#eefffe" stop-opacity=0.85 />
      </radialGradient>
      <radialGradient id="legal-move-gradient">
        <stop offset="0%" stop-color="#e2b17f" stop-opacity=1 />
        <stop offset="10%" stop-color="#e2b17f" stop-opacity=1 />
        <stop offset="30%" stop-color="#e2b17f" stop-opacity=0 />
      </radialGradient>

      <radialGradient id="atomic-gr" cx="5.22" cy="4.34" r="1.2" gradientTransform="matrix(8.9 0 0 8.9 7.31 6.47)" gradientUnits="userSpaceOnUse">
        <stop stop-color="#949494" offset="0"/>
        <stop stop-color="#5e5e5e" offset="1"/>
      </radialGradient>
      <linearGradient id="atomic-gr1">
        <stop stop-color="#6162ff" offset="0"/>
        <stop stop-color="#0001c2" offset="1"/>
      </linearGradient>
      <radialGradient id="atomic-gr2" cx="5.22" cy="4.34" r="1.2" gradientTransform="matrix(8.9 0 0 8.9 7.31 6.47)" gradientUnits="userSpaceOnUse">
        <stop stop-color="#ff3f3f" offset="0"/>
        <stop stop-color="#9a0000" offset="1"/>
      </radialGradient>
      <radialGradient id="atomic-gr3" cx="5.22" cy="4.34" r="1.2" gradientTransform="matrix(5.78 0 0 5.78 30.6 -16.5)" gradientUnits="userSpaceOnUse" xlink:href="#atomic-gr1"/>
      <radialGradient id="atomic-gr4" cx="5.22" cy="4.34" r="1.2" gradientTransform="matrix(5.78 0 0 5.78 47.7 30.3)" gradientUnits="userSpaceOnUse" xlink:href="#atomic-gr1"/>
      <radialGradient id="atomic-gr5" cx="5.22" cy="4.34" r="1.2" gradientTransform="matrix(5.78 0 0 5.78 -15.1 10.7)" gradientUnits="userSpaceOnUse" xlink:href="#atomic-gr1"/>
    </defs>
  </svg>

  <canvas id="canvas" class="display-none"></canvas>

  <div id="page">
    <svg id="board-primary" class="board" data-board-id="primary"></svg>
    <svg id="reserve-primary-top" class="reserve-container"></svg>
    <svg id="reserve-primary-bottom" class="reserve-container"></svg>
    <div id="player-name-container-primary-top" class="player-name-container">
      <div id="player-name-primary-top" class="player-name"></div>
    </div>
    <div id="player-name-container-primary-bottom" class="player-name-container">
      <div id="player-name-primary-bottom" class="player-name"></div>
    </div>
    <div id="clock-container-primary-top" class="clock-container">
      <div id="clock-primary-top" class="clock clock-inactive">-:--</div>
    </div>
    <div id="clock-container-primary-bottom" class="clock-container">
      <div id="clock-primary-bottom" class="clock clock-inactive">-:--</div>
    </div>
    <div id="turn-log-container-primary" class="turn-log-container">
      <div id="turn-log-scroll-area-primary" class="turn-log-scroll-area">
        <div id="turn-log-primary" class="turn-log"></div>
      </div>
    </div>

    <div id="participant-container">
      <div id="score-container">
        <div id="score-body"></div>
      </div>
      <div id="observers"></div>
    </div>

    <svg id="board-secondary" class="board" data-board-id="secondary"></svg>
    <svg id="reserve-secondary-top" class="reserve-container"></svg>
    <svg id="reserve-secondary-bottom" class="reserve-container"></svg>
    <div id="player-name-container-secondary-top" class="player-name-container">
      <div id="player-name-secondary-top" class="player-name"></div>
    </div>
    <div id="player-name-container-secondary-bottom" class="player-name-container">
      <div id="player-name-secondary-bottom" class="player-name"></div>
    </div>
    <div id="clock-container-secondary-top" class="clock-container">
      <div id="clock-secondary-top" class="clock clock-inactive">-:--</div>
    </div>
    <div id="clock-container-secondary-bottom" class="clock-container">
      <div id="clock-secondary-bottom" class="clock clock-inactive">-:--</div>
    </div>
    <div id="turn-log-container-secondary" class="turn-log-container">
      <div id="turn-log-scroll-area-secondary" class="turn-log-scroll-area">
        <div id="turn-log-secondary" class="turn-log"></div>
      </div>
    </div>

    <div id="chat-container">
      <div id="chat-box">
        <div id="chat-text-area"></div>
        <div id="chat-input-container">
          <input id="chat-input">
          <button id="chat-send-button" class="icon-button display-none">
            <svg class="icon-button-svg" viewBox="0 0 100 100">
              <path d="m23.2 19v25.6l29.1 5.31-29.1 5.31v25.6l53.6-31z"/>
            </svg>
          </button>
        </div>
      </div>
      <div id="chat-reference-tooltip-container" class="display-none">
        <div id="chat-reference-tooltip"></div>
        <div id="chat-reference-tooltip-hide">Hide ✖</div>
      </div>
    </div>
    <div id="chat-reference-dialog-body" class="display-none"></div>

    <div id="action-panel" class="full-width flex-col-stretch">
      <div id="button-panel">
        <div class="button-subpanel">
          <button id="leave-match-button" class="icon-button" style="display:none" title="Leave match">
            <svg class="icon-button-svg" viewBox="0 0 100 100">
              <use href="#leave"/>
            </svg>
          </button>
          <button id="ready-button" class="icon-button" style="display:none" title="Toggle readiness for the next game">
            <svg class="icon-button-svg" viewBox="0 0 100 100">
              <path d="m18.9 8c-6 0-10.9 4.89-10.9 10.9v62.2c0 6 4.89 10.9 10.9 10.9h62.2c6 0 10.9-4.89 10.9-10.9v-62.2c0-6-4.89-10.9-10.9-10.9zm0 4h62.2c3.85 0 6.89 3.04 6.89 6.89v62.2c0 3.85-3.04 6.89-6.89 6.89h-62.2c-3.85 0-6.89-3.04-6.89-6.89v-62.2c0-3.85 3.04-6.89 6.89-6.89z"/>
              <g id="ready-no">
                <path id="ready-animation-path" fill="none" stroke="none" d="m10 0h80c5.54 0 10 4.46 10 10v80c0 5.54-4.46 10-10 10h-80c-5.54 0-10-4.46-10-10v-80c0-5.54 4.46-10 10-10z"/>
                <circle r="2.5"><animateMotion begin="0s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
                <circle r="2.2"><animateMotion begin="0.067s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
                <circle r="1.9"><animateMotion begin="0.133s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
                <circle r="1.6"><animateMotion begin="0.2s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
                <circle r="2.5"><animateMotion begin="0.5s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
                <circle r="2.2"><animateMotion begin="0.567s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
                <circle r="1.9"><animateMotion begin="0.633s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
                <circle r="1.6"><animateMotion begin="0.7s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
                <circle r="2.5"><animateMotion begin="1s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
                <circle r="2.2"><animateMotion begin="1.067s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
                <circle r="1.9"><animateMotion begin="1.133s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
                <circle r="1.6"><animateMotion begin="1.2s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
                <circle r="2.5"><animateMotion begin="1.5s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
                <circle r="2.2"><animateMotion begin="1.567s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
                <circle r="1.9"><animateMotion begin="1.633s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
                <circle r="1.6"><animateMotion begin="1.7s" dur="2s" repeatCount="indefinite"><mpath href="#ready-animation-path"/></animateMotion></circle>
              </g>
              <g id="ready-yes">
                <path d="m41.9 75.1-22.8-24.3 7.39-8.28 15.4 18 32.8-38.2 7.39 8.28z"/>
              </g>
            </svg>
          </button>
          <div id="ready-button-caption"></div>
          <button id="resign-button" class="icon-button" style="display:none" title="Resign">
            <svg class="icon-button-svg" viewBox="0 0 10 10">
              <path d="m2.5039 2.2396s0.7439-0.44739 1.3612-0.55761c0.61731-0.11022 1.6756 0.18357 2.29 0.081159 0.61438-0.10241 1.3501-0.51711 1.3501-0.51711l0.5951 2.9956s-0.73572 0.41469-1.3501 0.51711c-0.61438 0.10241-1.6727-0.19137-2.29-0.081159-0.61731 0.11022-1.3612 0.55761-1.3612 0.55761z"/>
              <path d="m2.8711 2.166-0.73438 0.14648 1.332 6.7051 0.73438-0.14648-1.332-6.7051z"/>
            </svg>
          </button>
        </div>
        <div class="button-subpanel">
          <button id="toggle-faction-button" class="icon-button" style="display:none">
            <svg class="icon-button-svg" viewBox="0 0 10 10">
              <g id="toggle-faction-observer">
                <path d="m3.38 4.54a0.83 0.83 0 0 0-1.13-0.306 0.83 0.83 0 0 0-0.305 1.14 0.83 0.83 0 0 0 1.14 0.303 0.83 0.83 0 0 0 0.304-1.13zm-0.237-0.0211a0.322 0.322 0 0 1-0.118 0.44 0.322 0.322 0 0 1-0.44-0.118 0.322 0.322 0 0 1 0.118-0.44 0.322 0.322 0 0 1 0.44 0.118z"/>
                <path d="m6.85 4.53a0.83 0.83 0 0 0-1.13-0.304 0.83 0.83 0 0 0-0.306 1.13 0.83 0.83 0 0 0 1.14 0.305 0.83 0.83 0 0 0 0.303-1.14zm-0.236-0.0194a0.322 0.322 0 0 1-0.118 0.44 0.322 0.322 0 0 1-0.44-0.118 0.322 0.322 0 0 1 0.118-0.44 0.322 0.322 0 0 1 0.44 0.118z"/>
                <path d="m3.28 1.6c-0.617-8.72e-4 -1.16 0.405-1.54 1.02s-0.607 1.45-0.607 2.38c1.5e-4 0.922 0.228 1.76 0.607 2.38s0.924 1.02 1.54 1.02c0.705-4.41e-4 1.33-0.533 1.72-1.37 0.0571 0.122 0.12 0.238 0.188 0.348 0.379 0.617 0.922 1.02 1.54 1.02 0.617 0 1.16-0.407 1.54-1.02s0.605-1.45 0.605-2.38-0.226-1.76-0.605-2.38-0.924-1.02-1.54-1.02c-0.617 0-1.16 0.407-1.54 1.02-0.0671 0.109-0.13 0.225-0.188 0.348-0.392-0.838-1.02-1.37-1.72-1.37zm3.45 0.299c0.485 0 0.942 0.322 1.29 0.881 0.343 0.559 0.562 1.35 0.562 2.22s-0.219 1.66-0.562 2.22c-0.343 0.559-0.8 0.881-1.29 0.881s-0.94-0.322-1.28-0.881c-0.343-0.559-0.562-1.35-0.562-2.22s0.219-1.66 0.562-2.22c0.343-0.559 0.798-0.881 1.28-0.881zm-3.45 0.00195c0.614 3.87e-4 1.22 0.539 1.56 1.47-0.166 0.484-0.26 1.04-0.26 1.63s0.0941 1.14 0.26 1.63c-0.347 0.932-0.951 1.47-1.56 1.47-0.486 6.86e-4 -0.941-0.32-1.29-0.879-0.344-0.559-0.562-1.35-0.562-2.22 1.41e-4 -0.873 0.219-1.66 0.562-2.22 0.344-0.559 0.8-0.88 1.29-0.879z"/>
              </g>
              <g id="toggle-faction-player">
                <path d="m4.12 5.26a0.758 0.778 15.3 0 1-0.386 0.488l0.299 0.372-0.135 0.495-0.365-0.0997c-0.0451 0.234 0.0354 0.503 0.166 0.754a2.86 2.94 15.3 0 0 0.46 0.637l0.0194 0.0199-0.2 0.733-2.88-0.789 0.2-0.733 0.0268-0.00727a2.86 2.94 15.3 0 0 0.721-0.314c0.24-0.149 0.446-0.34 0.526-0.564l-0.364-0.0996 0.135-0.495 0.415-0.157a0.76 0.78 15.3 1 1 1.37-0.24z"/>
                <path d="m8.01 1.67c-0.576 0.00962-0.893 0.167-1.47 0.181-0.42 0.0102-1.07-0.238-1.49-0.215-0.354 0.0195-0.71 0.0346-1.06 0.0993-0.349 0.0649-0.697 0.153-1.03 0.288-0.341 0.14-0.696 0.433-0.996 0.647-0.357 0.254-0.822 0.689-0.979 0.877-0.0567 0.0679-0.0992 0.176-0.0914 0.264 0.00963 0.109 0.0576 0.212 0.16 0.249 0.054 0.0195 0.119 0.0158 0.185 0.00508-0.0742 0.0547-0.0948 0.165-0.128 0.224 0.00826 0.0944 0.0378 0.181 0.114 0.237 0.146 0.0676 0.256 0.0136 0.364 0.0194-0.0481 0.111-0.0707 0.193-0.062 0.217 0.0357 0.0963 0.149 0.191 0.25 0.21 0.111 0.0209 0.277-0.0296 0.371-0.0929 0.19-0.129 0.758-1.03 0.758-1.03l0.673-0.548c0.325-0.104 0.519-0.078 0.706-0.106 0.251 0.0121 0.927 0.21 1.03 0.316 0.00414 0.259-0.292 0.564-0.519 0.87-0.0929 0.135-0.408 0.562-0.423 0.724-0.0168 0.18-1.18e-4 0.353 0.155 0.446 0.185 0.111 0.384-0.0225 0.559-0.149 0.168-0.121 0.306-0.258 0.491-0.419 0.185-0.161 0.409-0.372 0.62-0.545 0.243-0.2 0.443-0.447 0.715-0.605 0.24-0.14 0.568-0.211 0.734-0.303 0.166-0.0921 0.282-0.205 0.282-0.205l1.13 0.148s0.138-0.387 0.117-1.01c-0.0158-0.472-0.138-0.794-0.138-0.794s-0.461 7.66e-4 -1.04 0.0104z"/>
              </g>
            </svg>
          </button>
          <button id="shared-wayback-button" class="icon-button" style="display:none">
            <svg class="icon-button-svg" viewBox="0 0 100 100">
              <g id="wayback-alone" stroke-linecap="round">
                <path d="m28.8 10.9c-13.2 0-23.9 10.7-23.9 23.9s10.7 23.9 23.9 23.9 23.9-10.7 23.9-23.9-10.7-23.9-23.9-23.9zm0 3c11.6 0 20.9 9.34 20.9 20.9 0 11.6-9.34 20.9-20.9 20.9-11.6 0-20.9-9.34-20.9-20.9 0-11.6 9.34-20.9 20.9-20.9z"/>
                <path d="m71.2 41.3c-13.2 0-23.9 10.7-23.9 23.9s10.7 23.9 23.9 23.9 23.9-10.7 23.9-23.9-10.7-23.9-23.9-23.9zm0 3c11.6 0 20.9 9.34 20.9 20.9 0 11.6-9.34 20.9-20.9 20.9-11.6 0-20.9-9.34-20.9-20.9 0-11.6 9.34-20.9 20.9-20.9z"/>
                <path d="m35.2 17.7a2.5 2.5 0 0 0-3.21 1.47l-5.51 14.8a2.5 2.5 0 0 0 1.47 3.21 2.5 2.5 0 0 0 3.21-1.47l5.51-14.8a2.5 2.5 0 0 0-1.47-3.22z"/>
                <path d="m29.2 32.3a2.5 2.5 0 0 0-1.86 0.447 2.5 2.5 0 0 0-0.553 3.49l6.99 9.62a2.5 2.5 0 0 0 3.49 0.555 2.5 2.5 0 0 0 0.553-3.49l-6.99-9.62a2.5 2.5 0 0 0-1.63-1z"/>
                <path d="m65.4 47.9a2.5 2.5 0 0 0-1.57 3.17l5.02 14.9a2.5 2.5 0 0 0 3.17 1.57 2.5 2.5 0 0 0 1.57-3.17l-5.02-14.9a2.5 2.5 0 0 0-3.17-1.57z"/>
                <path d="m80.1 54a2.5 2.5 0 0 0-1.77 0.719l-8.84 8.72a2.5 2.5 0 0 0-0.0254 3.54 2.5 2.5 0 0 0 3.54 0.0254l8.84-8.72a2.5 2.5 0 0 0 0.0254-3.54 2.5 2.5 0 0 0-1.76-0.744z"/>
              </g>
              <g id="wayback-together" stroke-linejoin="round" stroke-linecap="round">
                <path d="m34.5 15.4c-13.2 0-23.9 10.7-23.9 23.9s10.7 23.9 23.9 23.9c1.97 0 3.89-0.244 5.72-0.697-0.0411-0.588-0.0703-1.18-0.0703-1.78 0-0.441 0.0146-0.878 0.0371-1.31-1.81 0.51-3.72 0.789-5.69 0.789-11.5 0-20.9-9.33-20.9-20.9 0-11.5 9.33-20.9 20.9-20.9 11.5 0 20.9 9.32 20.9 20.9 0 7-3.43 13.2-8.7 17-0.29 1.24-0.459 2.53-0.498 3.85 7.27-4.09 12.2-11.9 12.2-20.8 0-13.2-10.7-23.9-23.9-23.9z"/>
                <path d="m65.5 36.8c-1.97 0-3.89 0.244-5.72 0.697 0.041 0.588 0.0684 1.18 0.0684 1.78 0 0.441-0.0166 0.879-0.0391 1.31 1.81-0.511 3.72-0.789 5.7-0.789 11.5 0 20.9 9.32 20.9 20.9 0 11.5-9.32 20.9-20.9 20.9-11.5 0-20.9-9.33-20.9-20.9 0-6.99 3.43-13.2 8.7-17 0.29-1.24 0.455-2.53 0.494-3.85-7.27 4.09-12.2 11.9-12.2 20.8 0 13.2 10.7 23.9 23.9 23.9s23.9-10.7 23.9-23.9-10.7-23.9-23.9-23.9z"/>
                <path d="m34.5 20.7a2.5 2.5 0 0 0-2.5 2.5v16.1a2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5v-16.1a2.5 2.5 0 0 0-2.5-2.5z"/>
                <path d="m43.7 26.9a2.5 2.5 0 0 0-3.5 0.521l-7.7 10.4a2.5 2.5 0 0 0 0.521 3.5 2.5 2.5 0 0 0 3.5-0.521l7.7-10.4a2.5 2.5 0 0 0-0.521-3.5z"/>
                <path d="m65.5 42.1a2.5 2.5 0 0 0-2.5 2.5v16.1a2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5v-16.1a2.5 2.5 0 0 0-2.5-2.5z"/>
                <path d="m74.7 48.3a2.5 2.5 0 0 0-3.5 0.521l-7.7 10.4a2.5 2.5 0 0 0 0.521 3.5 2.5 2.5 0 0 0 3.5-0.521l7.7-10.4a2.5 2.5 0 0 0-0.521-3.5z"/>
              </g>
            </svg>
          </button>
          <button id="rules-button" class="icon-button" title="View match rules">
            <svg class="icon-button-svg" viewBox="0 0 10 10">
              <g>
                <path d="m1.87 1.11c-0.27 0-0.502 0.114-0.658 0.295-0.156 0.181-0.238 0.425-0.238 0.686v0.834h1.49v4.98c0 0.256 0.0663 0.496 0.211 0.68 0.145 0.183 0.373 0.301 0.643 0.301h4.81c0.27 0 0.502-0.114 0.658-0.295 0.156-0.181 0.238-0.425 0.238-0.686v-0.602h-1.08v-5.21c0-0.54-0.441-0.98-0.98-0.98zm0 0.301c0.189 0 0.329 0.0721 0.432 0.191 0.103 0.119 0.164 0.29 0.164 0.488v0.533h-1.19v-0.533c0-0.198 0.0615-0.369 0.164-0.488 0.103-0.119 0.243-0.191 0.432-0.191zm0.66 0h4.44c0.378 0 0.68 0.302 0.68 0.68v5.21h-3.74v0.602c0 0.198-0.0615 0.369-0.164 0.488-0.103 0.119-0.243 0.191-0.432 0.191-0.189 0-0.314-0.0683-0.406-0.186s-0.148-0.292-0.148-0.494v-5.81c0-0.258-0.0812-0.499-0.234-0.68zm1.69 6.19h4.51v0.303c0 0.198-0.0615 0.369-0.164 0.488-0.103 0.119-0.243 0.191-0.432 0.191h-4.15c0.153-0.181 0.236-0.421 0.236-0.68z"/>
                <path d="m4.5 2.67v0.6h2.46v-0.6z"/>
                <path d="m3.64 4.09v0.6h3.33v-0.6z"/>
                <path d="m3.64 5.51v0.6h3.33v-0.6z"/>
              </g>
            </svg>
          </button>
          <button id="export-button" class="icon-button" style="display:none" title="Export game as BPGN">
            <svg class="icon-button-svg" viewBox="0 0 10 10">
              <path d="m4.5078 4.0552v1.8204h-0.84961l1.3418 1.6965 1.3418-1.6965h-0.84961v-1.8204z"/>
              <path d="m1.75 7.3965v1.8281h6.5v-1.8281h-0.69922v1.1289h-5.1016v-1.1289z"/>
              <g transform="matrix(.95594 0 0 .938 15.5 -.7372)">
              <g transform="matrix(1 0 -.3102 .43462 -13.053 1.6848)">
              <rect x="0" y="1" width="1" height="1"/> <rect x="0" y="3" width="1" height="1"/> <rect x="0" y="5" width="1" height="1"/>
              <rect x="1" y="0" width="1" height="1"/> <rect x="1" y="2" width="1" height="1"/> <rect x="1" y="4" width="1" height="1"/>
              <rect x="2" y="1" width="1" height="1"/> <rect x="2" y="3" width="1" height="1"/> <rect x="2" y="5" width="1" height="1"/>
              <rect x="3" y="0" width="1" height="1"/> <rect x="3" y="2" width="1" height="1"/> <rect x="3" y="4" width="1" height="1"/>
              <rect x="4" y="1" width="1" height="1"/> <rect x="4" y="3" width="1" height="1"/> <rect x="4" y="5" width="1" height="1"/>
              <rect x="5" y="0" width="1" height="1"/> <rect x="5" y="2" width="1" height="1"/> <rect x="5" y="4" width="1" height="1"/>
              </g>
              </g>
            </svg>
          </button>
          <button id="volume-button" class="icon-button" title="Change volume">
            <svg class="icon-button-svg" viewBox="0 0 10 10">
              <path d="m4.459 1.8633a0.10001 0.10001 0 0 0-0.074219 0.035156l-1.291 1.5117h-1.2305a0.10001 0.10001 0 0 0-0.099609 0.099609v2.9805a0.10001 0.10001 0 0 0 0.099609 0.099609h1.2305l1.291 1.5117a0.10001 0.10001 0 0 0 0.17578-0.064453v-6.0742a0.10001 0.10001 0 0 0-0.10156-0.099609z"/>
              <path id="volume-1" d="m5.4414 2.9492a0.175 0.175 0 0 0-0.14062 0.085937 0.175 0.175 0 0 0 0.060547 0.24023c0.46431 0.27729 0.80025 0.97217 0.78906 1.748-0.011187 0.77587-0.36491 1.4484-0.83398 1.6973a0.175 0.175 0 0 0-0.074219 0.23633 0.175 0.175 0 0 0 0.23828 0.072266c0.62692-0.33263 1.0069-1.1234 1.0195-2 0.012639-0.87657-0.34497-1.688-0.95898-2.0547a0.175 0.175 0 0 0-0.099609-0.025391z"/>
              <path id="volume-2" d="m6.4609 2.3008a0.2 0.2 0 0 0-0.17188 0.087891 0.2 0.2 0 0 0 0.050781 0.27734c0.53936 0.36946 0.94094 1.3144 0.92773 2.3652-0.01321 1.0509-0.43734 1.9663-0.98047 2.2969a0.2 0.2 0 0 0-0.068359 0.27539 0.2 0.2 0 0 0 0.27539 0.066406c0.73024-0.4444 1.1594-1.4816 1.1738-2.6328 0.014472-1.1512-0.38808-2.2124-1.1016-2.7012a0.2 0.2 0 0 0-0.10547-0.035156z"/>
              <path id="volume-3" d="m7.6934 1.5996a0.225 0.225 0 0 0-0.17188 0.080078 0.225 0.225 0 0 0 0.025391 0.31641c0.54326 0.46347 0.97069 1.6916 0.95703 3.0449-0.013659 1.3533-0.46682 2.5436-1.0098 2.9551a0.225 0.225 0 0 0-0.044922 0.31445 0.225 0.225 0 0 0 0.31641 0.042969c0.75582-0.57287 1.1729-1.8627 1.1875-3.3066 0.014574-1.444-0.37872-2.7659-1.1133-3.3926a0.225 0.225 0 0 0-0.14648-0.054688z"/>
              <path id="volume-mute" style="display:none" d="m5.6738 3.5879-0.35352 0.35352 1.0586 1.0586-1.0586 1.0586 0.35352 0.35352 1.0586-1.0605 1.0586 1.0586 0.35352-0.35352-1.0586-1.0586 1.0566-1.0566-0.35352-0.35352-1.0566 1.0566z"/>
            </svg>
          </button>
        </div>
      </div>

      <div id="cannot-start-alert" class="visibility-hidden"></div>
    </div>

    <div id="connection-info"></div>
  </div>

  <div id="cookie-banner" class="flex-row-full" style="display:none;">
    <div id="cookie-warning" class="flex-grow">
      This website uses cookies in order to function:
      <ul>
        <li>
          <b>Essential cookies</b> are required to provide basic features, such as secure log-in
          (always active);
        </li>
        <li>
          <b>Performance cookies</b> are used to collect anonymous statistics that helps us improve
          our website (if you are ok with that).
        </li>
      </ul>
      We do <i>not</i> use cookies for advertising.
    </div>
    <div class="flex-col">
      <button id="accept-essential-cookies-button">Essential cookies only</button>
      <button id="accept-all-cookies-button">Accept all cookies</button>
    </div>
  </div>

  <div id="menu-backdrop"></div>
  <dialog id="menu-dialog" class="overflow-visible">
    <!-- All input fields must have a non-empty placeholder for the `:placeholder-shown` css trick
          to work. If there is no meaningful placeholder text, use "&nbsp;" -->
    <div class="app-title-bar">
      <svg viewBox="0 0 100 100" class="app-logo">
        <!-- Same as logo.svg, but no background -->
        <path d="m57.081 24.592-11.829-14.761c-1.7132 3.4777-3.3728 9.616-0.98604 14.048a11.452 12.251 0 0 0-3.1218 0.68769c-5.4639 2.3454-11.458 8.4062-14.406 21.013-0.85311 3.6507-2.3887 5.3986-4.213 7.4765a27.327 29.235 0 0 0-5.6077 8.6333c-3.9293 9.1056 6.6731 18.212 14.405 9.9418a36.092 38.612 0 0 1 11.335-8.1812c4.5909-2.3167 7.9191-3.9988 9.7989-12.267 0.89279 3.8555 0.53766 12.956-8.05 18.508-8.5877 5.5525-10.376 17.256-10.197 20.721h48.839c0-32.947-4.0771-61.41-25.967-65.82z"/>
      </svg>
      <span class="app-title">bughouse<span class="app-title-suffix">.pro</span></span>
    </div>
    <div id="menu-start-page" class="menu-page">
      <div id="account-info-bar">
        <div id="registered-user-bar" class="flex-row-full" style="display:none">
          <span class="flex-grow">
            <div class="inline-block">
              <span class="logged-in-as-prefix">Welcome,</span><br>
              <span class="logged-in-as-account"></span>
            </div>
          </span>
          <button id="view-account-button" class="square-button" title="Account settings">👤︎</button>
          <button id="log-out-button">Log out</button>
        </div>
        <div id="guest-user-bar" class="flex-row-full">
          <span>
            <div class="inline-block">
              <span class="logged-in-as-prefix">Playing as</span><br>
              <span class="logged-in-as-account">Guest</span>
            </div>
            <div id="guest-user-tooltip" class="tooltip-standalone">
              <div class="tooltip-text">
                <p>
                  Bughouse.pro is free and available to everybody. As a guest, you can create or
                  join <i>unrated</i> games without limitations. Please log in to play rated.
                  In the future we plan to add more features for registered users,
                  such as friends-only games and easier access to your game history.
                </p>
              </div>
            </div>
          </span>
          <button id="authorization-button">Sign in</button>
        </div>
      </div>
      <div style="height: 0.4em"></div>
      <div class="align-center">
        <button id="create-rated-match-button" class="big-button tooltip-right">New rated match</button>
      </div>
      <div class="align-center">
        <button id="create-unrated-match-button" class="big-button tooltip-right">New unrated match</button>
      </div>
      <div class="align-center">
        <button id="join-match-button" class="big-button tooltip-right">Join match</button>
      </div>
      <div style="height: 0.4em"></div>
      <div class="flex-row-full">
        <button data-suburl="/dyn/stats" class="flex-grow">Leaderboard</button>
        <button data-suburl="/dyn/history" class="flex-grow">Rating history</button>
      </div>
      <div class="flex-row-full">
        <button id="game-archive-button" class="flex-grow tooltip-right">Game archive</button>
        <button data-suburl="/about.html" class="flex-grow">About</button>
      </div>
      <div class="flex-row-full">
        <button id="discord-button" class="flex-grow" onclick="window.open('https://discord.gg/HK57zMCHZw')">
          <svg viewBox="0 0 508.67 96.36" class="button-icon">
            <path d="M170.85,20.2h27.3q9.87,0,16.7,3.08a22.5,22.5,0,0,1,10.21,8.58,23.34,23.34,0,0,1,3.4,12.56A23.24,23.24,0,0,1,224.93,57a23.94,23.94,0,0,1-10.79,8.92q-7.24,3.3-17.95,3.29H170.85Zm25.06,36.54q6.65,0,10.22-3.32a11.8,11.8,0,0,0,3.57-9.07,11.5,11.5,0,0,0-3.18-8.5q-3.2-3.18-9.63-3.19h-8.54V56.74Z"/>
            <path d="M269.34,69.13a37,37,0,0,1-10.22-4.27V53.24a27.77,27.77,0,0,0,9.2,4.38,39.31,39.31,0,0,0,11.17,1.71,8.71,8.71,0,0,0,3.82-.66c.86-.44,1.29-1,1.29-1.58a2.37,2.37,0,0,0-.7-1.75,6.15,6.15,0,0,0-2.73-1.19l-8.4-1.89q-7.22-1.68-10.25-4.65a10.39,10.39,0,0,1-3-7.81,10.37,10.37,0,0,1,2.66-7.07,17.13,17.13,0,0,1,7.56-4.65,36,36,0,0,1,11.48-1.65A43.27,43.27,0,0,1,292,27.69a30.25,30.25,0,0,1,8.12,3.22v11a30,30,0,0,0-7.6-3.11,34,34,0,0,0-8.85-1.16q-6.58,0-6.58,2.24a1.69,1.69,0,0,0,1,1.58,16.14,16.14,0,0,0,3.74,1.08l7,1.26Q295.65,45,299,48t3.36,8.78a11.61,11.61,0,0,1-5.57,10.12Q291.26,70.61,281,70.6A46.41,46.41,0,0,1,269.34,69.13Z"/>
            <path d="M318.9,67.66a21,21,0,0,1-9.07-8,21.59,21.59,0,0,1-3-11.34,20.62,20.62,0,0,1,3.15-11.27,21.16,21.16,0,0,1,9.24-7.8,34.25,34.25,0,0,1,14.56-2.84q10.5,0,17.43,4.41V43.65a21.84,21.84,0,0,0-5.7-2.73,22.65,22.65,0,0,0-7-1.05q-6.51,0-10.19,2.38a7.15,7.15,0,0,0-.1,12.43q3.57,2.41,10.36,2.41a23.91,23.91,0,0,0,6.9-1,25.71,25.71,0,0,0,5.84-2.49V66a34,34,0,0,1-17.85,4.62A32.93,32.93,0,0,1,318.9,67.66Z"/>
            <path d="M368.64,67.66a21.77,21.77,0,0,1-9.25-8,21.14,21.14,0,0,1-3.18-11.41A20.27,20.27,0,0,1,359.39,37a21.42,21.42,0,0,1,9.21-7.74,38.17,38.17,0,0,1,28.7,0,21.25,21.25,0,0,1,9.17,7.7,20.41,20.41,0,0,1,3.15,11.27,21.29,21.29,0,0,1-3.15,11.41,21.51,21.51,0,0,1-9.2,8,36.32,36.32,0,0,1-28.63,0Zm21.27-12.42a9.12,9.12,0,0,0,2.56-6.76,8.87,8.87,0,0,0-2.56-6.68,9.53,9.53,0,0,0-7-2.49,9.67,9.67,0,0,0-7,2.49,8.9,8.9,0,0,0-2.55,6.68,9.15,9.15,0,0,0,2.55,6.76,9.53,9.53,0,0,0,7,2.55A9.4,9.4,0,0,0,389.91,55.24Z"/>
            <path d="M451.69,29V44.14a12.47,12.47,0,0,0-6.93-1.75c-3.73,0-6.61,1.14-8.61,3.4s-3,5.77-3,10.53V69.2H416V28.25h16.8v13q1.4-7.14,4.52-10.53a10.38,10.38,0,0,1,8-3.4A11.71,11.71,0,0,1,451.69,29Z"/>
            <path d="M508.67,18.8V69.2H491.52V60a16.23,16.23,0,0,1-6.62,7.88A20.81,20.81,0,0,1,474,70.6a18.11,18.11,0,0,1-10.15-2.83A18.6,18.6,0,0,1,457.11,60a25.75,25.75,0,0,1-2.34-11.17,24.87,24.87,0,0,1,2.48-11.55,19.43,19.43,0,0,1,7.21-8,19.85,19.85,0,0,1,10.61-2.87q12.24,0,16.45,10.64V18.8ZM489,55a8.83,8.83,0,0,0,2.63-6.62A8.42,8.42,0,0,0,489,42a11,11,0,0,0-13.89,0,8.55,8.55,0,0,0-2.59,6.47A8.67,8.67,0,0,0,475.14,55,9.42,9.42,0,0,0,482,57.51,9.56,9.56,0,0,0,489,55Z"/>
            <path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z"/>
            <ellipse cx="242.92" cy="24.93" rx="8.55" ry="7.68"/>
            <path d="M234.36,37.9a22.08,22.08,0,0,0,17.11,0V69.42H234.36Z"/>
          </svg>
        </button>
      </div>
    </div>

    <form id="menu-authorization-page" class="menu-page" action="javascript:;">
      <div class="flex-col">
        <div class="align-left">
          <button type="button" class="square-button back-button" title="Go back">🡨</button>
        </div>
        <button id="sign-with-google-button" class="big-button">
          <div class="flex-row-full">
            <svg id="google-logo" viewBox="0 0 10 10">
              <rect x=".86956" y=".86956" width="8.2609" height="8.2609" rx="1.5" fill="#fff" fill-opacity=".85" filter="url(#google-logo-background)"/>
              <g>
                <path d="m7.2618 5.0535c0-0.16649-0.01494-0.32656-0.042684-0.48024h-2.2112v0.9082h1.2636c-0.054432 0.29347-0.21984 0.54214-0.46849 0.70862v0.58909h0.75876c0.44395-0.40873 0.70007-1.0106 0.70007-1.7256z" fill="#4285f4"/>
                <path d="m5.0078 7.3478c0.63391 0 1.1654-0.21024 1.5539-0.56882l-0.75876-0.58909c-0.21024 0.14087-0.47916 0.22411-0.79505 0.22411-0.61151 0-1.1291-0.413-1.3138-0.96796h-0.78438v0.60829c0.38632 0.76733 1.1803 1.2935 2.0981 1.2935z" fill="#34a853"/>
                <path d="m3.6941 5.446c-0.046956-0.14087-0.073636-0.29134-0.073636-0.44609s0.026676-0.30522 0.073632-0.44609v-0.60829h-0.78438c-0.15901 0.31696-0.24972 0.67553-0.24972 1.0544s0.090708 0.73742 0.24972 1.0544z" fill="#fbbc05"/>
                <path d="m5.0078 3.586c0.34471 0 0.65418 0.11845 0.89753 0.35111l0.6734-0.6734c-0.4066-0.37886-0.93806-0.61151-1.5709-0.61151-0.9178 0-1.7118 0.52613-2.0981 1.2935l0.78438 0.60829c0.18462-0.55495 0.7022-0.96796 1.3138-0.96796z" fill="#ea4335"/>
              </g>
            </svg>
            <span class="flex-grow">Sign in with Google</span>
          </div>
        </button>
        <button id="sign-with-lichess-button" class="big-button">
          <div class="flex-row-full">
            <svg id="lichess-logo" viewBox="0 0 80 80">
                    <rect x="0" y="0" width="80" height="80" rx="12" fill="#fff" fill-opacity=".85" filter="url(#lichess-logo-background)"/>
                    <path d="m37.656 74.009c-4.8354-0.36436-9.6886-1.699-13.955-3.8378-3.4383-1.7236-6.4517-3.92-9.0933-6.628-7.0896-7.2676-10.055-17.334-8.1548-27.684 1.5646-8.5227 6.1202-15.614 12.927-20.122 6.4164-4.2497 14.836-6.2637 24.632-5.8922l2.1764 0.082493 0.71448-0.46162c2.8371-1.8331 5.781-2.7675 10.74-3.409 1.3469-0.17424 1.5334-0.18309 1.7288-0.082031 0.24019 0.1242 0.31608 0.26074 0.31608 0.56864 0 0.11136-0.4595 2.1736-1.0211 4.5828-1.0078 4.3233-1.0194 4.3838-0.89332 4.6483 0.07031 0.14737 0.50749 0.95627 0.97159 1.7975 0.4641 0.84128 0.96793 1.7581 1.1196 2.0374 0.15171 0.2793 1.5664 2.8457 3.1439 5.7031 1.5774 2.8574 3.8363 6.9531 5.0198 9.1016 3.237 5.8763 4.9952 9.0631 5.4255 9.8339 0.50792 0.90969 0.63287 1.4871 0.62769 2.9005-0.0037 0.91614-0.03691 1.2203-0.20664 1.8732-0.86524 3.328-3.915 6.1562-8.8068 8.167-1.1079 0.45544-2.3332 0.85827-2.6106 0.85827-0.25397 0-0.38898-0.15415-1.129-1.2891-1.3352-2.0478-3.9112-4.9986-6.541-7.4929-1.5045-1.427-2.0154-1.8499-5.6466-4.6744-4.6142-3.5891-6.2759-5.0009-8.48-7.2045-3.9949-3.9941-5.887-7.2765-6.1716-10.706-0.08995-1.0838 0.18839-2.7981 0.50585-3.1155 0.41619-0.41619 1.1662-0.01476 1.064 0.56953-0.02694 0.15422-0.06902 0.65348-0.09347 1.1095-0.03663 0.68284-0.01606 0.94126 0.11629 1.4648 0.63768 2.5217 3.041 5.405 7.3949 8.8718 2.0126 1.6025 3.381 2.5855 7.6172 5.4717 5.194 3.5387 5.6984 3.9377 8.1641 6.4574 2.308 2.3586 3.494 3.8269 4.3474 5.3817 0.22404 0.4082 0.4147 0.75294 0.42366 0.7661 0.03949 0.05785 1.0174-0.24498 1.6091-0.49822 2.5156-1.0767 4.1441-3.2328 4.6375-6.1402l0.12817-0.75512-2.3219-3.8933c-1.2771-2.1413-2.9627-4.9656-3.7459-6.2761-2.1258-3.5573-10.258-17.183-10.81-18.114-0.26416-0.44496-0.4989-0.88442-0.52166-0.97656-0.0251-0.10167 0.35524-1.304 0.96742-3.0582 1.1589-3.3208 1.1586-3.0658 0.0028-2.7713-1.7885 0.45585-3.5267 1.2861-7.057 3.3706-0.71397 0.4216-1.2524 0.68973-1.385 0.68973-0.11934 0-0.6484-0.06957-1.1757-0.15451-2.4739-0.39872-5.0621-0.55615-7.5603-0.45987-5.5228 0.21286-10.604 1.8776-14.844 4.8634-4.762 3.3535-8.8329 8.8527-10.751 14.524-2.991 8.8413-0.68144 19.066 6.03 26.696 4.991 5.6739 11.828 9.2927 19.487 10.315 1.578 0.21053 4.5386 0.28823 6.1195 0.16059 7.0509-0.56924 13.253-3.3262 18.267-8.1207 0.79159-0.75686 0.94438-0.87009 1.174-0.87009 0.61003 0 0.83436 0.48111 0.49462 1.0608-0.76303 1.302-2.9045 3.6393-4.5382 4.9532-4.0237 3.236-9.0858 5.1841-14.924 5.7434-1.1092 0.10625-4.5728 0.1453-5.655 0.06376z" stroke-width=".92274"/>
            </svg>
            <span class="flex-grow">Sign in with Lichess</span>
          </div>
        </button>
        <button id="begin-login-button" class="big-button">Log in</button>
        <button id="begin-signup-button" class="big-button">Sign up</button>
      </div>
    </form>

    <form id="menu-login-page" class="menu-page" action="javascript:;">
      <div class="align-left">
        <button type="button" class="square-button back-button" title="Go back">🡨</button>
      </div>
      <div class="menu-page-body">
        <label for="login-user-name">Account name</label>
        <input type="text" id="login-user-name" name="user_name"
          placeholder="&nbsp;" spellcheck="false" autocomplete="username" required
          maxlength="16" pattern="[A-Za-z0-9_\-]+"
          title="User name may contain Latin letters, numbers, underscores ('_') and dashes ('-')" />
        <div></div>

        <label for="login-password">Password</label>
        <input type="password" id="login-password" name="password"
          placeholder="&nbsp;" autocomplete="current-password" required />
        <div></div>
      </div>
      <div class="align-center">
        <button id="login-confirm-button" class="big-button">Log in</button>
      </div>
    </form>

    <form id="menu-signup-page" class="menu-page" action="javascript:;">
      <div class="align-left">
        <button type="button" class="square-button back-button" title="Go back">🡨</button>
      </div>
      <div class="menu-page-body">
        <label for="signup-user-name">Account name *</label>
        <input type="text" id="signup-user-name" name="user_name"
          placeholder="&nbsp;" spellcheck="false" autocomplete="username" required
          maxlength="16" pattern="[A-Za-z0-9_\-]+"
          title="User name may contain Latin letters, numbers, underscores ('_') and dashes ('-')" />
        <div class="tooltip-standalone">
          <div class="tooltip-text">
            <p>
              Account name (required). Your unique public identifier at bughouse.pro.
              May contain letters, numbers, underscores and dashes. Case-sensitive.
            </p>
          </div>
        </div>

        <label for="signup-email">Email</label>
        <input type="email" id="signup-email" name="email"
          placeholder="&nbsp;" autocomplete="email" />
        <div class="tooltip-standalone">
          <div class="tooltip-text">
            <p>
              Your email (optional). We do not send spam.
              The email is only used in order to restore your account if you forget your password.
            </p>
          </div>
        </div>

        <label for="signup-password">Password *</label>
        <input type="password" id="signup-password" name="password"
          placeholder="&nbsp;" minlength="8" autocomplete="new-password" required />
        <div class="tooltip-standalone">
          <div class="tooltip-text">
            <p>Password (required). Must be at least 8 characters long. Case-sensitive.</p>
          </div>
        </div>

        <label for="signup-confirm-password">Confirm password *</label>
        <input type="password" id="signup-confirm-password" name="confirm_password"
          placeholder="&nbsp;" minlength="8" autocomplete="new-password" required />
        <div></div>
      </div>
      <div class="align-center">
        <button id="signup-confirm-button" class="big-button">Create account</button>
      </div>
    </form>

    <form id="menu-signup-with-google-page" class="menu-page" action="javascript:;">
      <div class="align-left">
        <button type="button" class="square-button back-button" title="Go back">🡨</button>
      </div>
      <div class="menu-page-body">
        <label for="signup-with-google-user-name">Account name *</label>
        <input type="text" id="signup-with-google-user-name" name="user_name"
          placeholder="&nbsp;" spellcheck="false" autocomplete="username" required
          maxlength="16" pattern="[A-Za-z0-9_\-]+"
          title="User name may contain Latin letters, numbers, underscores ('_') and dashes ('-')" />
        <div class="tooltip-standalone">
          <div class="tooltip-text">
            <p>
              Account name (required). Your unique public identifier at bughouse.pro.
              May contain letters, numbers, underscores and dashes. Case-sensitive.
            </p>
          </div>
        </div>

        <div class="label">Email</div>
        <div class="logged-in-as-email fixed-form-value"></div>
        <div></div>
      </div>
      <div class="align-center">
        <button id="signup-with-google-confirm-button" class="big-button">Create account</button>
      </div>
    </form>

    <form id="menu-signup-with-lichess-page" class="menu-page" action="javascript:;">
      <div class="align-left">
        <button type="button" class="square-button back-button" title="Go back">🡨</button>
      </div>
      <div class="menu-page-body">
        <label for="signup-with-lichess-user-name">Account name *</label>
        <input type="text" id="signup-with-lichess-user-name" name="user_name"
          placeholder="&nbsp;" spellcheck="false" autocomplete="username" required
          maxlength="16" pattern="[A-Za-z0-9_\-]+"
          title="User name may contain Latin letters, numbers, underscores ('_') and dashes ('-')" />
        <div class="tooltip-standalone">
          <div class="tooltip-text">
            <p>
              Account name (required). Your unique public identifier at bughouse.pro.
              May contain letters, numbers, underscores and dashes. Case-sensitive.
            </p>
          </div>
        </div>

        <div class="label">Lichess User</div>
        <div class="logged-in-as-lichess-user-id fixed-form-value"></div>
        <div></div>
      </div>
      <div class="align-center">
        <button id="signup-with-lichess-confirm-button" class="big-button">Create account</button>
      </div>
    </form>

    <form id="menu-view-account-page" class="menu-page" action="javascript:;">
      <div class="align-left">
        <button type="button" class="square-button back-button" title="Go back">🡨</button>
      </div>
      <div class="menu-page-body">
        <div class="label">Account name</div>
        <div class="logged-in-as-account fixed-form-value"></div>
        <div></div>

        <div class="label">Email</div>
        <div class="logged-in-as-email fixed-form-value"></div>
        <div></div>

        <div class="label logged-in-with-password">Password</div>
        <div class="logged-in-with-password">••••••••</div>
        <div class="logged-in-with-password"></div>
      </div>
      <div class="flex-row-full">
        <button id="view-account-change-button" class="flex-grow logged-in-with-password">Change info</button>
        <button id="view-account-delete-button" class="flex-grow">Delete account</button>
      </div>
    </form>

    <form id="menu-change-account-page" class="menu-page" action="javascript:;">
      <div class="align-left">
        <button type="button" class="square-button back-button" title="Go back">🡨</button>
      </div>
      <div class="menu-page-body">
        <div class="label">Account name</div>
        <div class="logged-in-as-account fixed-form-value"></div>
        <div></div>

        <label for="change-account-current-password">Current password</label>
        <input type="password" id="change-account-current-password" name="current_password"
          placeholder="&nbsp;" autocomplete="current-password" required />
        <div></div>

        <label for="change-account-email">Email</label>
        <input type="email" id="change-account-email" name="email"
          placeholder="no email" autocomplete="email" />
        <div class="tooltip-standalone">
          <div class="tooltip-text">
            <p>
              Your email (optional; clear the field to remove). We do not send spam.
              The email is only used in order to restore your account if you forget your password.
            </p>
          </div>
        </div>

        <label for="change-account-new-password">New password</label>
        <input type="password" id="change-account-new-password" name="new_password"
          placeholder="keep current password" minlength="8" autocomplete="new-password" />
        <div class="tooltip-standalone">
          <div class="tooltip-text">
            <p>
              New password (leave empty to keep the current password).
              Must be at least 8 characters long. Case-sensitive.
            </p>
          </div>
        </div>

        <label for="change-account-confirm-new-password">Confirm new password</label>
        <input type="password" id="change-account-confirm-new-password" name="confirm_new_password"
          placeholder="keep current password" minlength="8" autocomplete="new-password" />
        <div></div>
      </div>
      <div class="align-center">
        <button id="change-account-confirm-button" class="big-button">Update account</button>
      </div>
    </form>

    <form id="menu-delete-account-page" class="menu-page" action="javascript:;">
      <div class="align-left">
        <button type="button" class="square-button back-button" title="Go back">🡨</button>
      </div>
      <div id="account-deletion-warning">
        You are about to delete your bughouse.pro account,
        <span class="logged-in-as-account fixed-form-value"></span>.
        This action cannot be undone!
        <span class="logged-in-with-password">Type your password below in order to continue.</span>
        <!-- TODO: Some kind of confirmation for those logged in with Google. -->
      </div>
      <div class="menu-page-body">
        <label for="delete-account-password" class="logged-in-with-password">Password</label>
        <input type="password" id="delete-account-password" name="password" class="logged-in-with-password"
          placeholder="&nbsp;" autocomplete="current-password" required />
        <div class="logged-in-with-password"></div>
      </div>
      <div class="align-center">
        <button id="delete-account-confirm-button" class="big-button danger-button">☠ Delete account</button>
      </div>
    </form>

    <form id="menu-create-match-name-page" class="menu-page" action="javascript:;">
      <div class="flex-row-full">
        <button type="button" class="square-button back-button" title="Go back">🡨</button>
        <div class="flex-grow"></div>
        <div class="logged-in-as">
          <span class="logged-in-as-prefix">Playing as</span>
          <!-- Always "Guest". -->
          <span class="logged-in-as-account"></span>
        </div>
      </div>
      <div class="menu-page-body">
        <!-- `pattern` and `maxlength` must be in sync with join match player name field and with `is_valid_player_name` -->
        <!-- Improvement potential. Dedup player name properties (like `pattern` and `title`),
              or reuse the same <input> via dynamic css grids. -->
        <label for="ccn-player-name" class="guest-player-name">Player name</label>
        <input type="text" id="ccn-player-name" name="player_name" class="guest-player-name"
          placeholder="&nbsp;" spellcheck="false" required
          maxlength="16" pattern="[A-Za-z0-9_\-]+"
          title="Player name may consist of Latin letters, numbers, underscores ('_') and dashes ('-')" />
        <div class="guest-player-name"></div>
      </div>
      <div class="align-center">
        <button id="ccn-confirm-button" class="big-button">Choose rules ❯</button>
      </div>
    </form>

    <form id="menu-create-match-page" class="menu-page" action="javascript:;">
      <div class="flex-row-full">
        <button type="button" class="square-button back-button" title="Go back">🡨</button>
        <div class="flex-grow"></div>
        <div class="logged-in-as">
          <span class="logged-in-as-prefix">Playing as</span>
          <!-- TODO: Should this show chosen player name in addition to "Guest"? -->
          <span class="logged-in-as-account"></span>
        </div>
      </div>
      <!-- TODO: Rename `ccn, `cc` and `cj`: their are based on "contest" term, which was replace by "match". -->
      <div id="cc-rule-variants"></div>
      <div id="cc-rule-details" class="menu-page-body"></div>
      <input type="hidden" id="cc-rating" name="rating" />
      <div class="align-center">
        <button id="cc-confirm-button" class="big-button"></button>
      </div>
    </form>

    <form id="menu-join-match-page" class="menu-page" action="javascript:;">
      <div class="flex-row-full">
        <button type="button" class="square-button back-button" title="Go back">🡨</button>
        <div class="flex-grow"></div>
        <div class="logged-in-as">
          <span class="logged-in-as-prefix">Playing as</span>
          <span class="logged-in-as-account"></span>
        </div>
      </div>
      <div class="menu-page-body">
        <label for="jc-match-id">Match ID</label>
        <input type="text" id="jc-match-id" name="match_id"
          placeholder="&nbsp;" spellcheck="false" autocomplete="off" required
          maxlength="10" pattern="[a-zA-Z0-9]*"
          title="Match ID consists of Latin letters and numbers" />
        <div></div>

        <!-- `pattern` and `maxlength` must be in sync with join match player name field and with `is_valid_player_name` -->
        <label for="jc-player-name" class="guest-player-name">Player name</label>
        <input type="text" id="jc-player-name" name="player_name" class="guest-player-name"
          placeholder="&nbsp;" spellcheck="false" required
          maxlength="16" pattern="[A-Za-z0-9_\-]+"
          title="Player name may consist of Latin letters, numbers, underscores ('_') and dashes ('-')" />
        <div class="guest-player-name"></div>
      </div>
      <div class="align-center">
        <button id="jc-confirm-button" class="big-button">Join match!</button>
      </div>
    </form>

    <div id="menu-lobby-page" class="menu-page">
      <div class="flex-row-full">
        <div id="lobby-match"><span id="lobby-match-caption"></span></div>
        <button id="lobby-leave-button" type="button" class="square-button" title="Leave match">
          <svg class="square-button-icon" viewBox="0 0 100 100">
            <use href="#leave"/>
          </svg>
        </button>
      </div>
      <hr>
      <div id="lobby-rules"></div>
      <hr>
      <div id="lobby-participants"></div>
      <hr>
      <div id="lobby-footer">
        <div id="lobby-waiting" class="centered"></div>
        <div id="lobby-countdown">
          Starting in
          <span id="lobby-countdown-seconds"></span>
          <span>
            <span class="dot">.</span><span class="dot">.</span><span class="dot">.</span>
          </span>
        </div>
        <div id="lobby-countdown-progressbar"></div>
      </div>
    </div>

    <form id="menu-game-archive-page" class="menu-page" action="javascript:;">
      <div class="flex-row-full">
        <button type="button" class="square-button back-button" title="Go back">🡨</button>
        <div>My Game Archive</div>
      </div>
      <div style="height: 0.4em"></div>
      <div class="fixed-head-table">
        <table id="archive-game-table" class="embossed-table"></table>
      </div>
    </form>
  </dialog>
</body>

</html>
